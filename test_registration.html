<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Registration</title>
</head>
<body>
    <h2>Test Registration Form</h2>
    <form id="registrationForm">
        <div>
            <label>Username:</label>
            <input type="text" id="username" name="username" value="" required>
        </div>
        <div>
            <label>Email:</label>
            <input type="email" id="email" name="email" value="" required>
        </div>
        <div>
            <label>First Name:</label>
            <input type="text" id="firstName" name="firstName" value="Juan" required>
        </div>
        <div>
            <label>Last Name:</label>
            <input type="text" id="lastName" name="lastName" value="Dela Cruz" required>
        </div>
        <div>
            <label>Contact Number:</label>
            <input type="text" id="contactNum" name="contactNum" value="09123456789">
        </div>
        <div>
            <label>Barangay:</label>
            <select id="barangay" name="barangay" required>
                <option value="Aldezar">Aldezar</option>
                <option value="Alteza">Alteza</option>
                <option value="Anib">Anib</option>
            </select>
        </div>
        <div>
            <label>Password:</label>
            <input type="password" id="password" name="password" value="testpass123" required>
        </div>
        <div>
            <button type="submit">Register</button>
        </div>
    </form>

    <div id="result"></div>

    <script>
        // Generate unique values when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const timestamp = Date.now();
            document.getElementById('username').value = 'user' + timestamp;
            document.getElementById('email').value = 'user' + timestamp + '@example.com';
        });

        document.getElementById('registrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                username: document.getElementById('username').value,
                email: document.getElementById('email').value,
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                contactNum: document.getElementById('contactNum').value,
                barangay: document.getElementById('barangay').value,
                password: document.getElementById('password').value
            };

            try {
                const response = await fetch('/kolektrash/backend/api/register_resident_new.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();
                document.getElementById('result').innerHTML = '<pre>' + JSON.stringify(result, null, 2) + '</pre>';
                
                if (response.ok) {
                    document.getElementById('result').style.color = 'green';
                } else {
                    document.getElementById('result').style.color = 'red';
                }
            } catch (error) {
                document.getElementById('result').innerHTML = 'Error: ' + error.message;
                document.getElementById('result').style.color = 'red';
            }
        });
    </script>

    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        div { margin: 10px 0; }
        label { display: inline-block; width: 120px; }
        input, select { width: 200px; padding: 5px; }
        button { padding: 10px 20px; background: #007cba; color: white; border: none; cursor: pointer; }
        #result { margin-top: 20px; padding: 10px; border: 1px solid #ccc; background: #f9f9f9; }
    </style>
</body>
</html>
